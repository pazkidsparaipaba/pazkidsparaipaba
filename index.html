<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paz Kids</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.0/build/qrcode.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Evita rolagem indesejada */
        }
        .background-image {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: -1; /* Coloca o fundo atrás do conteúdo */
            background-image: url('data:image/jpeg;base64,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');
        }
        .container {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            max-width: 900px;
            width: 100%;
            z-index: 1; /* Garante que o container fique acima do fundo */
            position: relative;
        }
        h1 {
            text-align: center;
            color: #007bff;
            margin-bottom: 20px;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        .tab-btn {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .tab-btn:hover {
            background-color: #0056b3;
        }
        .tab-btn.active {
            background-color: #28a745;
        }
        #admin-section, #parent-section {
            display: none;
        }
        #admin-section.active, #parent-section.active {
            display: block;
        }
        #add-child {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            min-width: 150px;
        }
        button {
            padding: 10px 15px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background-color: #218838;
        }
        .child-entry {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
            transition: transform 0.2s;
        }
        .child-entry:hover {
            transform: scale(1.02);
        }
        .child-number {
            font-weight: bold;
            flex: 1;
        }
        .status-indicator {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }
        .green { background-color: #28a745; }
        .red { background-color: #dc3545; }
        .action-btn {
            background-color: #ffc107;
            margin-left: 5px;
        }
        .action-btn:hover {
            background-color: #e0a800;
        }
        .delete-btn {
            background-color: #dc3545;
        }
        .delete-btn:hover {
            background-color: #c82333;
        }
        #announcement {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            text-align: center;
            font-size: 1.1em;
            color: #856404;
        }
        #search-input {
            margin-bottom: 20px;
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #ddd;
        }
        #parent-status {
            text-align: center;
        }
        #parent-status .status-indicator {
            width: 100px;
            height: 100px;
            margin: 20px auto;
        }
        #qr-code {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Paz Kids</h1>
        <div class="tabs">
            <button class="tab-btn active" onclick="showSection('admin')">Modo Líder</button>
            <button class="tab-btn" onclick="showSection('parent')">Modo Pais</button>
        </div>
        <div id="admin-section" class="active">
            <input id="search-input" type="text" placeholder="Buscar por número ou nome..." oninput="searchChildren()">
            <div id="add-child">
                <input type="text" id="child-name" placeholder="Nome da Criança (opcional)">
                <input type="text" id="parent-name" placeholder="Nome do Pai/Mãe (opcional)">
                <button onclick="addChild()">Adicionar Criança</button>
            </div>
            <div id="dashboard"></div>
            <div id="announcement"></div>
        </div>
        <div id="parent-section">
            <input id="parent-number" type="number" placeholder="Digite o número da criança" min="1">
            <button onclick="loadParentStatus()">Ver Status</button>
            <div id="parent-status">
                <div id="status-indicator" class="status-indicator green"></div>
                <p id="status-message">Digite o número para ver o status.</p>
            </div>
        </div>
    </div>

    <script>
        const supabaseUrl = 'https://uovokgqsgtrmxecqtvcv.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVvdm9rZ3FzZ3RybXhlY3F0dmN2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcwODYzODEsImV4cCI6MjA3MjY2MjM4MX0.-P_5JOr0TpmvSToIxetk9ImNLFL5hfCVpczQYFWiDZ4';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
        let childrenData = [];
        let currentNumber = null;

        // Alterna entre abas
        function showSection(section) {
            document.getElementById('admin-section').classList.remove('active');
            document.getElementById('parent-section').classList.remove('active');
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`${section}-section`).classList.add('active');
            document.querySelector(`[onclick="showSection('${section}')"]`).classList.add('active');
            if (section === 'parent') {
                const urlParams = new URLSearchParams(window.location.search);
                const number = urlParams.get('number');
                if (number) {
                    document.getElementById('parent-number').value = number;
                    loadParentStatus();
                }
            } else {
                loadChildren();
            }
        }

        // Admin: Carrega crianças
        async function loadChildren() {
            try {
                const { data, error } = await supabase.from('children').select('*').order('number', { ascending: true });
                if (error) {
                    console.error('Erro ao carregar crianças:', error);
                    alert(`Erro ao carregar crianças: ${error.message}`);
                    return;
                }
                childrenData = data || [];
                renderDashboard(childrenData);
            } catch (err) {
                console.error('Erro inesperado:', err);
                alert('Erro inesperado ao carregar crianças.');
            }
        }

        // Admin: Adiciona criança
        async function addChild() {
            try {
                const childName = document.getElementById('child-name').value.trim();
                const parentName = document.getElementById('parent-name').value.trim();
                const { data: maxData, error: maxError } = await supabase.from('children').select('number').order('number', { ascending: false }).limit(1);
                if (maxError) {
                    console.error('Erro ao obter próximo número:', maxError);
                    alert(`Erro ao obter próximo número: ${maxError.message}`);
                    return;
                }
                const nextNumber = maxData.length > 0 ? maxData[0].number + 1 : 1;
                const { error } = await supabase.from('children').insert([{ number: nextNumber, child_name: childName || null, parent_name: parentName || null, status: 'green' }]);
                if (error) {
                    console.error('Erro ao adicionar criança:', error);
                    alert(`Erro ao adicionar criança: ${error.message}`);
                    return;
                }
                document.getElementById('child-name').value = '';
                document.getElementById('parent-name').value = '';
                loadChildren();
                const parentUrl = `${window.location.origin}/?number=${nextNumber}`;
                const qrDiv = document.createElement('div');
                qrDiv.id = 'qr-code';
                document.getElementById('add-child').appendChild(qrDiv);
                QRCode.toCanvas(qrDiv, parentUrl, { width: 100 }, (err) => { if (err) console.error('Erro ao gerar QR code:', err); });
                alert(`Criança adicionada! Número: ${nextNumber}. Link para pais: ${parentUrl}`);
                setTimeout(() => qrDiv.remove(), 10000);
            } catch (err) {
                console.error('Erro inesperado:', err);
                alert('Erro inesperado ao adicionar criança.');
            }
        }

        // Admin: Toggle status
        async function toggleStatus(id, currentStatus) {
            try {
                // Verificar se o ID existe
                const { data: child, error: fetchError } = await supabase.from('children').select('id').eq('id', id).single();
                if (fetchError || !child) {
                    console.error('Erro: ID não encontrado ou erro na busca:', fetchError);
                    alert('Erro: Criança não encontrada.');
                    return;
                }
                const newStatus = currentStatus === 'green' ? 'red' : 'green';
                const { error } = await supabase.from('children').update({ status: newStatus }).eq('id', id);
                if (error) {
                    console.error('Erro ao atualizar status:', error);
                    alert(`Erro ao atualizar status: ${error.message}`);
                    return;
                }
                console.log(`Status atualizado para ${newStatus} para id ${id}`);
            } catch (err) {
                console.error('Erro inesperado:', err);
                alert('Erro inesperado ao atualizar status.');
            }
        }

        // Admin: Remover criança
        async function removeChild(id) {
            if (confirm('Confirmar check-out da criança?')) {
                try {
                    const { error } = await supabase.from('children').delete().eq('id', id);
                    if (error) {
                        console.error('Erro ao remover criança:', error);
                        alert(`Erro ao remover criança: ${error.message}`);
                        return;
                    }
                    loadChildren();
                } catch (err) {
                    console.error('Erro inesperado:', err);
                    alert('Erro inesperado ao remover criança.');
                }
            }
        }

        // Admin: Editar nomes
        async function editNames(id, childName, parentName) {
            try {
                const newChildName = prompt('Novo nome da criança:', childName);
                const newParentName = prompt('Novo nome do pai/mãe:', parentName);
                if (newChildName !== null && newParentName !== null) {
                    const { error } = await supabase.from('children').update({ child_name: newChildName || null, parent_name: newParentName || null }).eq('id', id);
                    if (error) {
                        console.error('Erro ao editar nomes:', error);
                        alert(`Erro ao editar nomes: ${error.message}`);
                        return;
                    }
                    loadChildren();
                }
            } catch (err) {
                console.error('Erro inesperado:', err);
                alert('Erro inesperado ao editar nomes.');
            }
        }

        // Admin: Render dashboard
        function renderDashboard(data) {
            const dashboard = document.getElementById('dashboard');
            dashboard.innerHTML = '';
            let needsParent = [];
            data.forEach(child => {
                const entry = document.createElement('div');
                entry.classList.add('child-entry');
                const numSpan = document.createElement('span');
                numSpan.classList.add('child-number');
                numSpan.textContent = `${child.number}: ${child.child_name || 'Sem nome'} (criança) - ${child.parent_name || 'Sem nome'} (pai)`;
                const indicator = document.createElement('div');
                indicator.classList.add('status-indicator', child.status);
                const toggleBtn = document.createElement('button');
                toggleBtn.textContent = child.status === 'green' ? 'Precisa do Pai' : 'Marcar OK';
                toggleBtn.onclick = () => toggleStatus(child.id, child.status);
                const editBtn = document.createElement('button');
                editBtn.classList.add('action-btn');
                editBtn.textContent = 'Editar Nomes';
                editBtn.onclick = () => editNames(child.id, child.child_name, child.parent_name);
                const deleteBtn = document.createElement('button');
                deleteBtn.classList.add('delete-btn');
                deleteBtn.textContent = 'Check-out';
                deleteBtn.onclick = () => removeChild(child.id);
                entry.appendChild(numSpan);
                entry.appendChild(indicator);
                entry.appendChild(toggleBtn);
                entry.appendChild(editBtn);
                entry.appendChild(deleteBtn);
                dashboard.appendChild(entry);
                if (child.status === 'red') {
                    needsParent.push(`${child.number} ${child.child_name ? `(${child.child_name})` : ''}`);
                }
            });
            const announcement = document.getElementById('announcement');
            announcement.textContent = needsParent.length > 0 ? `Crianças que precisam dos pais: ${needsParent.join(', ')}` : 'Todas as crianças estão bem!';
        }

        // Admin: Busca
        function searchChildren() {
            const query = document.getElementById('search-input').value.toLowerCase();
            const filtered = childrenData.filter(child => 
                child.number.toString().includes(query) || 
                (child.child_name && child.child_name.toLowerCase().includes(query)) || 
                (child.parent_name && child.parent_name.toLowerCase().includes(query))
            );
            renderDashboard(filtered);
        }

        // Parent: Carrega status
        async function loadParentStatus() {
            try {
                const number = document.getElementById('parent-number').value;
                if (!number) return alert('Digite o número da criança.');
                currentNumber = number;
                const { data, error } = await supabase.from('children').select('status').eq('number', number).single();
                if (error) {
                    console.error('Erro ao carregar status:', error);
                    alert(`Erro ao carregar status: ${error.message}`);
                    return;
                }
                if (data) {
                    updateParentStatus(data.status);
                    supabase.channel(`child-${number}`).on('postgres_changes', { event: 'UPDATE', schema: 'public', table: 'children', filter: `number=eq.${number}` }, (payload) => updateParentStatus(payload.new.status)).subscribe();
                } else {
                    alert('Número não encontrado.');
                }
            } catch (err) {
                console.error('Erro inesperado:', err);
                alert('Erro inesperado ao carregar status.');
            }
        }

        // Parent: Atualiza UI
        function updateParentStatus(status) {
            const indicator = document.getElementById('status-indicator');
            indicator.classList.remove('green', 'red');
            indicator.classList.add(status);
            document.getElementById('status-message').textContent = status === 'green' ? 'Tudo bem com sua criança!' : 'Sua criança precisa de você agora!';
        }

        // Inicia
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('number')) {
            showSection('parent');
        } else {
            loadChildren();
            supabase.channel('children').on('postgres_changes', { event: '*', schema: 'public', table: 'children' }, loadChildren).subscribe();
        }
    </script>
</body>
</html>


